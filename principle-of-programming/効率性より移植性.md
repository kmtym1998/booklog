# 3.59 効率性より移植性

## とは

- 「移植性」「開発効率性」は二律背反の選択
- 「移植性」を優先すべき
  - 他のプラットフォームに合わせてコードを書き換えるコストが少ないかどうかの指標
  - 移植性を重視することで、どこでも動作するという便宜さを持つ、息の長いソフトウェアを作ることができます

## なぜ重要か？
- ソフトウェアの寿命は、ハードウェアと切り離すことができない
- そのハードウェアの寿命に依存する
- 価値を維持し続けるためには、別のハードウェアへの移植が必要
  - ここに時間を取られることは、ビジネス上致命傷
- 移植性を持たせるために、開発効率性を下げ、多少の余分な労力を払うとしても、後になって十分に報われる

## どうやる？
- ハードウェアに依存しないコードを書く。
- 移植性のために、ハードウェアに依存する部分と、依存しない部分を切り離した設計を行う。
- 移植性のためにも、コードの最適化（パフォーマンス・チューニング）に時間をかけない
  - パフォーマンスを突き詰めるとハードウェア専用の特殊能力を使用しなければなりません
  - これは移植性を妨げます。ここで優先すべきも、最適化よりも移植性です。
  - たとえ実行速度を一時的に失ったとしても、移植性さえあれば、別の優秀なハードウェアが出現した時に、それに乗り換えることで問題は解決します。

## 所感
- ここでは「ハードウェア」って言っているが、IaaS のサービスなどにでも置き換えられると思った
- 最近、Cloud Run Jobs を使ってバッチの実装をしたが、パフォーマンスを考慮して Cloud Run Jobs に依存した作りにしてしまった
  - https://zenn.dev/link/comments/67ed0789be6031
> - 移植性のために、ハードウェアに依存する部分と、依存しない部分を切り離した設計を行う。
- あんま切り離せてなかったなーという反省
